# 要件定義書

## 概要

### サービス名
ワークるん

### 目的
本アプリケーションは、日々の業務報告（日報）作成におけるモチベーションを維持し、社員が楽しく継続できるようサポートすることを第一の目的とします。日報だけでなく、社内SNS（ツイッター）のような気軽に発信できる機能も提供し、キャラクターからのポジティブなフィードバックを通じて報告業務の心理的負担を軽減します。これにより、社員が前向きに情報共有に取り組み、結果として社内コミュニケーションの活性化にも繋がる、より協力的で明るい職場環境の醸成を目指します。

### 背景
多くの職場において、日々の業務報告（日報）が形式的で、社員にとっては負担感のある作業となりがちです。開発者自身も日報作成の際に面倒さを感じることがあり、これが継続的なモチベーション低下の一因になり得ると実感しています。また、リモートワークの普及などは、社員同士が互いの細かな頑張りや成果を把握し、気軽に称賛し合う機会を減少させる傾向にあります。

さらに、既存のコミュニケーションツール（例えば全社的なSlackなど）では、過去の重要な発言や情報を効率的に検索したり、特定の個人の活動や発言を一覧で確認したりすることが難しい場合があります。これにより、有益な情報が埋もれてしまったり、フォーマルな報告以外の気軽な情報共有が活発に行われにくいという課題も考えられます。

本アプリケーションは、これらの背景を踏まえ、日報提出のモチベーションを維持する工夫（キャラクターによる応援）に加え、SNSのような気軽さで日々の気づきや情報を発信できる場を提供します。これにより、楽しく効率的な情報共有を促進し、個人の活動を見える化することで、よりオープンで活気のあるコミュニケーション文化の醸成を目指します。

## 利用者（ペルソナ）

### ペルソナ1: 田中 一郎 (仮名)
* **年齢:** 28歳
* **役割:** 中堅エンジニア・チームリーダー
* **ITリテラシー:** 高い。新しいツールも積極的に試すタイプ。
* **性格:** 真面目で責任感が強いが、やや内向的。メンバーの頑張りを認めたいが、直接褒めるのは少し苦手。
* **目的/ニーズ:**
    * チームメンバーの日々の進捗やコンディションを把握し、サポートしやすくしたい。
    * 日報作成の時間を短縮し、もっと本質的な業務に時間を使いたい。
    * チームの雰囲気を良くし、メンバーが気軽に相談や報告をできる環境を作りたい。
    * 自分自身の小さな達成感も、キャラクターに褒められることで味わいたい。
* **アプリ利用場面（想定）:**
    * 朝一番にチームメンバーの昨日の日報（匿名投稿も含む）をチェックし、重要な情報や困っているメンバーがいないか確認する。
    * 日中は、気づいたことや共有事項を「つぶやき」で投稿。
    * 退勤前に自分の日報を作成・投稿し、キャラクターに応援してもらう。

### ペルソナ2: 鈴木 花子 (仮名)
* **年齢:** 23歳
* **役割:** 新人デザイナー
* **ITリテラシー:** 普通。スマホアプリは日常的に利用。
* **性格:** 明るく社交的だが、自分の成果にまだ自信が持てない。細やかなフィードバックを求めている。
* **目的/ニーズ:**
    * 日々の業務で学んだことや、小さなデザインの改善点を気軽に共有したい。
    * 先輩や同僚からの反応（コメントやいいねなど）や、キャラクターからの励ましを通じて、仕事への自信とモチベーションを高めたい。
    * 他のメンバーがどんなことに関心を持っているか知りたい。
    * 日報という堅苦しい形ではなく、もっとライトに自分の活動を発信したい。
* **アプリ利用場面（想定）:**
    * 午前中にあった小さな成功や、誰かに感謝したいことをお昼休憩前に「匿名つぶやき」で投稿してキャラクターに褒めてもらい、午後の活力にする。
    * 他の人の「つぶやき」を見て、社内の出来事を知る。
    * 退勤前には、今日やったことや学んだことを日報にまとめて投稿する。
    * 業務の合間や気づいた時にいつでも気軽に「つぶやき」（記名・匿名）を投稿したり閲覧したりする。

## 機能要件

### 機能一覧
1.  **ユーザー管理機能:** ユーザー登録、ログイン、ログアウト、簡単なプロフィール設定。
2.  **投稿機能:**
    * 投稿タイプ選択（「日報」「つぶやき」）。
    * 各タイプに応じた入力フォーム。
    * 投稿の作成、編集、削除（自分の投稿のみ）。
3.  **タイムライン機能:** 全ユーザーの投稿（日報・つぶやき）を時系列で一覧表示。
4.  **キャラクター応援機能:**
    * 投稿完了時に、解放済みの動物キャラクターの中からランダムで1体と、状況に応じたトーンの応援メッセージを表示。
5.  **ランクアップ＆キャラクターコレクション機能:**
    * **記名（匿名でない）**の日報・つぶやきを投稿することで経験値（またはポイント）を獲得。
    * 経験値が一定に達するとユーザーランクがアップ。
    * ランクアップや特定の条件を達成すると、新しい応援キャラクターが解放され、応援時に登場するようになる。
6.  **匿名投稿機能:**
    * 「つぶやき」投稿時のみ、匿名での投稿を選択可能。
    * 投稿は社内の全員が閲覧可能。
    * キャラクター応援の対象となる（ただし、ランクアップやキャラクターコレクションの経験値には寄与しない）。
7.  **リアクション機能（いいね！など）:**
    * 各投稿に対して、他のユーザーが「いいね！」などの簡単な反応を付けられる。
8.  **コメント機能:**
    * 各投稿に対して、他のユーザーがコメントを投稿できる。
9.  **メンション機能:**
    * 投稿やコメントをする際に、`@ユーザー名` の形式で特定のユーザーに通知を送ることができる。

**将来的な拡張機能（案）：**
* 投稿の下書き保存機能
* 投稿の予約投稿機能
* 投稿内容の検索機能
* 通知機能（自分の投稿にコメントやリアクションがついた時、メンションされた時など。メンション機能とは別に、より詳細な通知があれば）

### ユーザーストーリー
1.  **As a** チームリーダーの田中一郎, **I want to** メンバーの日報を手軽に確認し、気分や課題点を把握したい **so that** 適切なフォローアップやサポートを迅速に行えるようにするため。
2.  **As a** 新人の鈴木花子, **I want to** 作成したデザインの小さな工夫点を「つぶやき」として投稿し、キャラクターに「すごいね！」と褒めてもらいたい **so that** 日々の小さな頑張りが認められる感覚を得て、仕事へのモチベーションを高めるため。
3.  **As a** 全ての社員, **I want to** 他の人の「日報」や「つぶやき」を読むことで、社内の他の人がどんなことに取り組んでいるかを知りたい **so that** 新しい発見や協力のきっかけを見つけたり、組織としての一体感を感じられるようにするため。
4.  **As a** 全ての社員, **I want to** 投稿を続けることで新しい応援キャラクターに出会いたい **so that** アプリを使い続ける楽しみが増え、日々の報告や共有が習慣になるようにするため。
5.  **As a** チームリーダーの田中一郎, **I want to** 部下（例えば鈴木さん）の日報やつぶやきに対して、内容を具体的に読んだ上で「いいね！」を押し、さらに前向きな点や期待を込めたコメントを積極的に送りたい **so that** 彼らの日々の頑張りや小さな成果を具体的に認め、モチベーション向上に直接つなげ、チーム全体のエンゲージメントと信頼関係を高めたい。

### 受け入れ条件

**1. ユーザー管理機能**
* ユーザー登録:
    * ニックネーム、メールアドレス、パスワード、パスワード確認の入力フォームが表示されること。
    * 必須項目が未入力の状態で登録ボタンを押した場合、適切なエラーメッセージが表示され、登録が完了しないこと。
    * パスワードとパスワード確認の入力内容が一致しない場合、エラーメッセージが表示され、登録が完了しないこと。
    * 既にシステムに登録されているメールアドレスで新規登録を試みた場合、エラーメッセージが表示され、登録が完了しないこと。
    * 全ての入力条件が満たされた状態で登録ボタンを押すと、「登録が完了しました」などの成功メッセージが表示され、ユーザーは自動的にログイン状態になるか、ログインページへ案内されること。
* ログイン:
    * メールアドレスとパスワードを入力するためのフォームが表示されること。
    * 登録されていないメールアドレス、または誤ったパスワードを入力してログインを試みた場合、エラーメッセージが表示され、ログインできないこと。
    * 正しいメールアドレスとパスワードを入力してログインに成功した場合、アプリケーションのメインページ（例：タイムラインページ）に遷移すること。
    * ログイン成功後、ナビゲーションバーやヘッダー等にユーザーのニックネームが表示されるなど、ログイン状態であることが視覚的に確認できること。
* ログアウト:
    * ログイン状態のユーザーに対して、ログアウトを行うためのボタンまたはリンクが、アプリケーション内の分かりやすい場所（例：ナビゲーションバーのドロップダウンメニュー内など）に表示されること。
    * ログアウト操作を行うと、ユーザーセッションが破棄され、未ログイン状態のトップページやログインページに遷移すること。
    * ログアウト後は、ログインが必要な機能（例：新規投稿、いいね、コメントなど）へのアクセスが制限されること。

**2. 投稿機能**
* ユーザーは「日報」または「つぶやき」の投稿タイプを選択できること。
* 「日報」を選択した場合、日報用の入力項目（例：今日の業務、明日の予定、良かった点、気分など）が表示されること。
* 「つぶやき」を選択した場合、自由記述のテキストエリアが表示されること。
* 必須項目（例：「日報」の「今日の業務」、「つぶやき」の本文）が未入力の状態で投稿ボタンを押した場合、エラーメッセージが表示され、投稿が保存されないこと。
* 投稿ボタンを押すと、入力内容が保存され、「投稿しました！」のような成功メッセージが表示されること。
* 投稿後、自分の投稿がタイムラインの適切な位置（例：先頭）に表示されること。
* 投稿後、自分のアカウントページ（またはマイページのような場所）にも、その投稿が一覧などで確認できるように表示されること。
* 投稿した内容（入力したテキスト、選択した気分など）が、タイムライン上および自分のアカウントページで正しく表示されていること。
* ユーザーは自分の過去の投稿を選択し、内容を編集して再保存できること。
* ユーザーは自分の過去の投稿を削除でき、削除後はタイムラインや自分のアカウントページから該当の投稿が見えなくなること。

**3. タイムライン機能**
* アプリケーションのメイン画面として、複数のユーザーによる投稿が一覧形式で表示されること。
* 投稿は、原則として作成日時が新しいものが上部に表示される（時系列の逆順）。
* 各投稿には、投稿者のニックネーム（匿名投稿の場合は「匿名さん」などの固定表示）、投稿日時、投稿の主要な内容（日報のタイトルや一部、つぶやきの本文など）が分かりやすく表示されること。
* 各投稿に関連づけられた「いいね！」の数やコメントの数が表示されること。
* 投稿件数が多い場合でも、画面をスクロールすることで過去の投稿を適切に読み込み、表示できること（例：無限スクロール、または「もっと見る」ボタンやページネーションによる読み込み）。

**4. キャラクター応援機能**
* 日報またはつぶやき（匿名投稿も含む）の投稿が正常に完了した直後に、自動的にキャラクターが登場する画面（またはそれに準ずる表示エリア）が表示されること。これが投稿完了の通知の役割も兼ねる。
* キャラクター画面には、1体の動物キャラクターの画像が表示されること。
* キャラクター画像と共に表示されるメッセージは、投稿の種類（日報／つぶやき／匿名つぶやき）、日報に記載された「今日の気分」（もしあれば）、その他の投稿内容のニュアンスなどを考慮し、トーンが変化すること（例：通常の応援、共感の言葉、労いの言葉、事実確認の言葉など、複数パターンから状況に応じて適切なものが選ばれる）。
* （キャラクターコレクション機能と連動する場合）登場するキャラクターは、ユーザーが解放済みのキャラクターの中からランダムで選ばれること（ただし、特定のメッセージトーンと特定のキャラクターが結びつく演出があっても良い）。
* キャラクター画面には、タイムラインに戻るためのボタンや、画面を閉じるためのアクション（例：「OK」ボタン、「タイムラインへ」ボタン）が用意されていること。

**5. ランクアップ＆キャラクターコレクション機能**
* 記名（匿名でない）の日報またはつぶやきを1回投稿するごとに、アカウントに所定の経験値（またはポイント、投稿数カウントなど）が加算されること。
* 累計経験値が事前に設定された閾値に達すると、ユーザーの「ランク」が自動的に1つ上のレベルに更新されること。
* ランクアップした際には、「ランクアップ！称号『〇〇』を獲得しました！」のような明確な通知メッセージがユーザーに表示されること。
* 特定のランクへの到達、または特定の行動条件（例：連続投稿日数、特定種類の投稿回数など）を満たした際に、新しい動物キャラクターが「解放」されたことがユーザーに通知され、そのキャラクターが以降の「キャラクター応援機能」で登場するようになること。
* ユーザーが自身の現在のランク、次のランクアップまでに必要な経験値（または進捗）、及び解放済みのキャラクターの一覧を確認できる専用のページ（例：プロフィールページやステータスページ内）が存在すること。

**6. 匿名投稿機能**
* 「つぶやき」の投稿作成画面に、「匿名で投稿する」というチェックボックスまたはスイッチなどの選択肢が用意されていること。
* 「匿名で投稿する」を選択して投稿した場合、タイムライン上では投稿者名が「匿名さん」（または他の固定的な匿名表示名）として表示され、実際のユーザー名は表示されないこと。
* 匿名投稿は、他の通常の「つぶやき」と同様にタイムラインに表示され、社内の全ユーザーが閲覧できること。
* 匿名投稿に対しても、他のユーザーは「いいね！」や「コメント」ができること。
* 匿名投稿が完了した後も、キャラクター応援機能が動作すること（応援メッセージのトーンは、匿名であることを考慮したものが含まれても良い）。
* ユーザーが過去に自分が行った匿名投稿を確認したい場合、通常の自分の投稿一覧（マイページなど）とは別の専用の画面（例：「マイ匿名ポスト」メニューなど）で、自分だけがそれらの投稿を閲覧できること。通常の自分の投稿一覧には、ユーザー自身の匿名投稿は表示されないこと。
* 「日報」の投稿作成画面には、匿名で投稿する選択肢は表示されないこと。

**7. リアクション機能（いいね！など）**
* 各投稿（日報、記名つぶやき、匿名つぶやき）の下部または分かりやすい位置に、「いいね！」ボタン（または複数のリアクションボタンのセット）が表示されていること。
* 「いいね！」ボタンをユーザーがクリック（またはタップ）すると、その投稿の「いいね！」数がリアルタイムで1つ増加し、ボタンの見た目が押された状態（例：色が濃くなる、アイコンが変化するなど）に変わること。
* ユーザーが既に「いいね！」した投稿の同じボタンを再度クリック（またはタップ）すると、「いいね！」が取り消され、数が1つ減少し、ボタンの見た目が元の押されていない状態に戻ること。
* 各投稿に付けられた「いいね！」の現在の合計数が、投稿の近くに分かりやすく表示されていること。
* （もし実装する場合）「いいね！」数をクリックまたはマウスオーバーすることで、誰が「いいね！」したかの一覧（または一部のユーザー名）が表示されること。

**8. コメント機能**
* 各投稿（日報、記名つぶやき、匿名つぶやき）の下部または関連する場所に、「コメントする」ためのインターフェース（例：ボタン、入力欄）が用意されていること。
* コメント入力エリアにテキストを入力し、送信アクション（例：「送信」ボタンのクリック）を行うと、コメントが該当の投稿に紐づいてシステムに保存され、表示されること。
* 各コメントには、コメントを投稿したユーザーのニックネームと投稿日時が明示されること。（匿名投稿へのコメント時、コメント投稿者が匿名を選べるか、または常に記名かのルールに従う）
* ユーザーは自身が投稿したコメントに限り、後から編集または削除できること。
* 一つの投稿に複数のコメントが付けられた場合、それらは時系列（例：古い順または新しい順）に整理されて表示され、多数のコメントがある場合は適切にページネーションされるか、「さらに表示」のようなUIで対応されること。
* 匿名投稿に対してもコメントが可能であること。（コメント投稿者の匿名性に関するルールは別途定義される）

**9. メンション機能**
* 投稿作成時やコメント作成時のテキスト入力中に「@」を入力すると、システムに登録されているユーザー名の候補が部分一致などでサジェスト（提案）され、ユーザーはその候補から選択できること。
* メンションを含む投稿またはコメントが作成・保存されると、メンションされたユーザーに対して、アプリケーション内で何らかの通知（例：通知アイコンのバッジ表示、通知一覧への追加など）が行われること。（詳細な通知方法は将来的に「通知機能」で定義）
* タイムライン上の投稿文やコメント文中で、メンションされたユーザー名（例：@田中一郎）は、視覚的に区別できるスタイル（例：リンク色、太字など）で表示されること。
* （もしプロフィールページを実装する場合）メンションされたユーザー名をクリック（またはタップ）すると、該当ユーザーのプロフィールページに遷移すること。
* 存在しないユーザー名や、意図的にサジェスト外の「@文字列」を入力した場合、それはメンションとして扱われず、単なるテキストとして表示されること。

## 非機能要件

### 性能
* ユーザーが日常的に行う主要な操作（タイムラインの閲覧、投稿作成、コメント・リアクションなど）において、ストレスを感じさせない程度の応答速度を保つこと。
* タイムラインのスクロールや新しい投稿の読み込みはスムーズであること。
* 投稿ボタンを押してからキャラクターの応援が表示されるまでの待ち時間は、ユーザー体験を損なわない程度に短いこと（例：3秒以内を目安とする）。
* 新しいコメントや「いいね！」が画面に反映されるまでの時間は、リアルタイムに近い感覚であること。

### セキュリティ
* ユーザーアカウントは、メールアドレスとパスワードによって保護される。
* パスワードはデータベースにハッシュ化して保存し、平文では保存しない。
* ユーザーは自分の投稿・コメントのみ編集・削除が可能であり、他者のデータを不正に操作できないようにする。
* （推奨）HTTPS通信を常時使用し、通信経路を暗号化する。
* 匿名投稿の投稿者が、システム的な不備によって特定できてしまうようなことがないように配慮する。
* Webアプリケーションの一般的な脆弱性（例：XSS、CSRFなど、Railsフレームワークが提供する基本的な対策を活用する）に対応する。

### 運用


## 制約・前提条件
* 本アプリケーションの開発には、Ruby on Railsフレームワークを使用する。
* ユーザーアカウントの作成および認証には、メールアドレスとパスワードを用いる。
* アプリケーション内で使用する動物キャラクター等の画像素材は、著作権フリーのもの、または開発者が権利を有するオリジナル素材のみを使用し、著作権法を遵守する。
* 本アプリケーションの主な対象ブラウザは、Google ChromeおよびMicrosoft Edgeの最新安定版とする。
* 初期リリースでは、日本語環境のみをサポート対象とする。
* 開発は、Gitを用いたバージョン管理システムで行う。